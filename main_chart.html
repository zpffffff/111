<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒ å·å¸‚äº¤é€šäº‹æ•…è¶‹åŠ¿åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <style>
        #main-chart {
            width: 100%;
            height: 600px;
        }
        .nav-link {
            text-align: center;
            margin: 20px;
        }
        a {
            color: #4ECDC4;
            text-decoration: none;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h2>æƒ å·å¸‚äº¤é€šäº‹æ•…è¶‹åŠ¿åˆ†æï¼ˆ2016å¹´åï¼‰</h2>
    <div class="nav-link">
        <a href="huizhou_forecast.html">ğŸ‘‰ æŸ¥çœ‹æœªæ¥é¢„æµ‹</a>
        <a href="pie_chart.html">ğŸ‘‰ æŸ¥çœ‹å„åŒºå¿æ­»äº¡äººæ•°å æ¯”</a>
        <a href="huizhou_economic_forecast.html">ğŸ‘‰ æŸ¥çœ‹ç»æµæŸå¤±é¢„æµ‹</a>
    </div>
    <div id="main-chart"></div>

    <script>
        fetch('data/huizhou_traffic_2016.json')
            .then(response => response.json())
            .then(data => {
                let years = data.map(d => d.å¹´ä»½);
                let loss_total = data.map(d => d['å…¨å¸‚æŸå¤±æŠ˜æ¬¾ï¼ˆä¸‡å…ƒï¼‰']);
                let deaths_total = data.map(d => d.å…¨å¸‚æ­»äº¡äººæ•°);
                let deaths_huicheng = data.map(d => d.æƒ åŸåŒºæ­»äº¡äººæ•°);
                let deaths_huiyang = data.map(d => d.æƒ é˜³åŒºæ­»äº¡äººæ•°);
                let deaths_longmen = data.map(d => d.é¾™é—¨å¿æ­»äº¡äººæ•°);
                let deaths_huidong = data.map(d => d.æƒ ä¸œå¿æ­»äº¡äººæ•°);
                let deaths_boluo = data.map(d => d.åšç½—å¿æ­»äº¡äººæ•°);
                let deaths_dayawan = data.map(d => d.å¤§äºšæ¹¾åŒºæ­»äº¡äººæ•°);
                let deaths_zhongkai = data.map(d => d.ä»²æºé«˜æ–°åŒºæ­»äº¡äººæ•°);

                let chart = echarts.init(document.getElementById('main-chart'));
                let option = {
                    tooltip: { trigger: 'axis' },
                    legend: { 
                        data: ['å…¨å¸‚ç»æµæŸå¤±', 'å…¨å¸‚æ­»äº¡äººæ•°', 'æƒ åŸåŒº', 'æƒ é˜³åŒº', 'é¾™é—¨å¿', 
                               'æƒ ä¸œå¿', 'åšç½—å¿', 'å¤§äºšæ¹¾åŒº', 'ä»²æºé«˜æ–°åŒº'] 
                    },
                    xAxis: { 
                        type: 'category', 
                        data: years,
                        axisLabel: { rotate: 45 }
                    },
                    yAxis: [
                        { type: 'value', name: 'æŸå¤±æŠ˜æ¬¾ï¼ˆä¸‡å…ƒï¼‰' },
                        { type: 'value', name: 'æ­»äº¡äººæ•°', position: 'right' }
                    ],
                    series: [
                        { name: 'å…¨å¸‚ç»æµæŸå¤±', type: 'line', data: loss_total, itemStyle: { color: '#FF6B6B' } },
                        { name: 'å…¨å¸‚æ­»äº¡äººæ•°', type: 'bar', yAxisIndex: 1, data: deaths_total, itemStyle: { color: '#4ECDC4' } },
                        { name: 'æƒ åŸåŒº', type: 'bar', yAxisIndex: 1, data: deaths_huicheng, stack: 'åŒºå¿æ­»äº¡äººæ•°', itemStyle: { color: '#6C5B7B' } },
                        { name: 'æƒ é˜³åŒº', type: 'bar', yAxisIndex: 1, data: deaths_huiyang, stack: 'åŒºå¿æ­»äº¡äººæ•°', itemStyle: { color: '#355C7D' } },
                        { name: 'é¾™é—¨å¿', type: 'bar', yAxisIndex: 1, data: deaths_longmen, stack: 'åŒºå¿æ­»äº¡äººæ•°', itemStyle: { color: '#C06C84' } },
                        { name: 'æƒ ä¸œå¿', type: 'bar', yAxisIndex: 1, data: deaths_huidong, stack: 'åŒºå¿æ­»äº¡äººæ•°', itemStyle: { color: '#F8B195' } },
                        { name: 'åšç½—å¿', type: 'bar', yAxisIndex: 1, data: deaths_boluo, stack: 'åŒºå¿æ­»äº¡äººæ•°', itemStyle: { color: '#99B898' } },
                        { name: 'å¤§äºšæ¹¾åŒº', type: 'bar', yAxisIndex: 1, data: deaths_dayawan, stack: 'åŒºå¿æ­»äº¡äººæ•°', itemStyle: { color: '#2A363B' } },
                        { name: 'ä»²æºé«˜æ–°åŒº', type: 'bar', yAxisIndex: 1, data: deaths_zhongkai, stack: 'åŒºå¿æ­»äº¡äººæ•°', itemStyle: { color: '#E84A5F' } }
                    ]
                };
                chart.setOption(option);
                window.addEventListener('resize', () => chart.resize());
            });
    </script>
</body>
</html>